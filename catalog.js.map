{"version":3,"file":"catalog.js","sources":["../src/js/helpers/pagination.js","../src/js/components/movie-list.js"],"sourcesContent":["import { refs } from './refs';\nimport Pagination from 'tui-pagination';\n\nexport const instancePagination = new Pagination(refs.movieListPagination, {\n  itemsPerPage: 20,\n  totalItems: 0,\n});\n","import {\n  getMovieById,\n  getMovieByName,\n  getWeeklyMovies,\n} from '../helpers/movies-api';\nimport { instancePagination } from '../helpers/pagination';\nimport { refs } from '../helpers/refs';\nimport {\n  modalTemplate,\n  moviesTemplate,\n  updateModalBtn,\n} from '../helpers/render-function';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport { showModal } from './modal';\n//!================================================\nlet page;\nlet totalPage = 0;\nlet inputValue;\n\ndocument.addEventListener('DOMContentLoaded', async e => {\n  page = 1;\n  const response = await getWeeklyMovies();\n  const markup = moviesTemplate(response.results);\n  refs.movieList.innerHTML = markup;\n  totalPage = response.total_pages;\n  instancePagination.reset(response.total_results);\n});\n\ninstancePagination.on('afterMove', async event => {\n  const currentPage = event.page;\n\n  let response;\n  if (!inputValue) {\n    response = await getWeeklyMovies(currentPage);\n  } else {\n    response = await getMovieByName(inputValue, currentPage);\n  }\n  const markup = moviesTemplate(response.results);\n  refs.movieList.innerHTML = markup;\n});\n//!================================================\n\nrefs.searchMovieForm.addEventListener('submit', async e => {\n  e.preventDefault();\n  page = 1;\n  const formData = new FormData(e.target);\n  inputValue = formData.get('movie');\n  const response = await getMovieByName(inputValue, page);\n  const markup = moviesTemplate(response.results);\n  refs.movieList.innerHTML = markup;\n  instancePagination.reset(response.total_pages);\n});\n\n//!================================================\n\nrefs.movieList.addEventListener('click', async e => {\n  if (e.target === refs.movieList) {\n    return;\n  }\n  const liElement = e.target.closest('li');\n  const id = liElement.dataset.id;\n\n  const response = await getMovieById(id);\n\n  const markup = modalTemplate(response);\n  refs.modalContent.innerHTML = markup;\n  updateModalBtn(id);\n  showModal();\n});\n\n//!================================================\n"],"names":["instancePagination","Pagination","refs","page","inputValue","e","response","getWeeklyMovies","markup","moviesTemplate","event","currentPage","getMovieByName","id","getMovieById","modalTemplate","updateModalBtn","showModal"],"mappings":"iJAGO,MAAMA,EAAqB,IAAIC,EAAWC,EAAK,oBAAqB,CACzE,aAAc,GACd,WAAY,CACd,CAAC,ECQD;AACA,IAAIC,EAEAC,EAEJ,SAAS,iBAAiB,mBAAoB,MAAMC,GAAK,CACvDF,EAAO,EACP,MAAMG,EAAW,MAAMC,IACjBC,EAASC,EAAeH,EAAS,OAAO,EAC9CJ,EAAK,UAAU,UAAYM,EACfF,EAAS,YACrBN,EAAmB,MAAMM,EAAS,aAAa,CACjD,CAAC,EAEDN,EAAmB,GAAG,YAAa,MAAMU,GAAS,CAChD,MAAMC,EAAcD,EAAM,KAE1B,IAAIJ,EACCF,EAGHE,EAAW,MAAMM,EAAeR,EAAYO,CAAW,EAFvDL,EAAW,MAAMC,EAAgBI,CAAW,EAI9C,MAAMH,EAASC,EAAeH,EAAS,OAAO,EAC9CJ,EAAK,UAAU,UAAYM,CAC7B,CAAC,EACD;AAEAN,EAAK,gBAAgB,iBAAiB,SAAU,MAAMG,GAAK,CACzDA,EAAE,eAAc,EAChBF,EAAO,EAEPC,EADiB,IAAI,SAASC,EAAE,MAAM,EAChB,IAAI,OAAO,EACjC,MAAMC,EAAW,MAAMM,EAAeR,EAAYD,CAAI,EAChDK,EAASC,EAAeH,EAAS,OAAO,EAC9CJ,EAAK,UAAU,UAAYM,EAC3BR,EAAmB,MAAMM,EAAS,WAAW,CAC/C,CAAC,EAED;AAEAJ,EAAK,UAAU,iBAAiB,QAAS,MAAMG,GAAK,CAClD,GAAIA,EAAE,SAAWH,EAAK,UACpB,OAGF,MAAMW,EADYR,EAAE,OAAO,QAAQ,IAAI,EAClB,QAAQ,GAEvBC,EAAW,MAAMQ,EAAaD,CAAE,EAEhCL,EAASO,EAAcT,CAAQ,EACrCJ,EAAK,aAAa,UAAYM,EAC9BQ,EAAeH,CAAE,EACjBI,GACF,CAAC,EAED;"}